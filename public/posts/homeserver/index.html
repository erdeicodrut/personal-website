<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Switching to a self hosted paradigm. | Codrut Erdei</title>
<meta name=keywords content="home server,docker"><meta name=description content="In the past years I&rsquo;ve always wanted to have a home server for some reason, but my formation as a programmer who did leetcode style problems from the age of 10 it was really hard for me to bear the inefficiency of having a Linux machine running 24/7 in my home.
Having been semi-cured of that issue let&rsquo;s jump in the actual config.
The config Starting out with the computer I chose for a server was a Dell OptiPlex 7050 Micro that I bought refurbished from a local company for around $140, plus I had to get an SSD because the one that came with it had too many bad sectors; so I got an SSD for ~$35 and that was that."><meta name=author content="Me"><link rel=canonical href=https://codrut.dev/posts/homeserver/><meta name=google-site-verification content="GuvxiGsrJSf0gKSJewt7SNDZshJBKja0q-2PI7KL9gk"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://codrut.dev/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://codrut.dev/favicon16x16.png><link rel=icon type=image/png sizes=32x32 href=https://codrut.dev/favicon32x32.png><link rel=apple-touch-icon href=https://codrut.dev/apple_touch_icon.png><link rel=mask-icon href=https://codrut.dev/safari_pinned_tab.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://codrut.dev/posts/homeserver/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Switching to a self hosted paradigm."><meta property="og:description" content="In the past years I&rsquo;ve always wanted to have a home server for some reason, but my formation as a programmer who did leetcode style problems from the age of 10 it was really hard for me to bear the inefficiency of having a Linux machine running 24/7 in my home.
Having been semi-cured of that issue let&rsquo;s jump in the actual config.
The config Starting out with the computer I chose for a server was a Dell OptiPlex 7050 Micro that I bought refurbished from a local company for around $140, plus I had to get an SSD because the one that came with it had too many bad sectors; so I got an SSD for ~$35 and that was that."><meta property="og:type" content="article"><meta property="og:url" content="https://codrut.dev/posts/homeserver/"><meta property="og:image" content="https://codrut.dev/images/serverdocker.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-07-05T00:00:00+00:00"><meta property="article:modified_time" content="2024-07-05T00:00:00+00:00"><meta property="og:site_name" content="Codrut Erdei"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://codrut.dev/images/serverdocker.webp"><meta name=twitter:title content="Switching to a self hosted paradigm."><meta name=twitter:description content="In the past years I&rsquo;ve always wanted to have a home server for some reason, but my formation as a programmer who did leetcode style problems from the age of 10 it was really hard for me to bear the inefficiency of having a Linux machine running 24/7 in my home.
Having been semi-cured of that issue let&rsquo;s jump in the actual config.
The config Starting out with the computer I chose for a server was a Dell OptiPlex 7050 Micro that I bought refurbished from a local company for around $140, plus I had to get an SSD because the one that came with it had too many bad sectors; so I got an SSD for ~$35 and that was that."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://codrut.dev/posts/"},{"@type":"ListItem","position":2,"name":"Switching to a self hosted paradigm.","item":"https://codrut.dev/posts/homeserver/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Switching to a self hosted paradigm.","name":"Switching to a self hosted paradigm.","description":"In the past years I\u0026rsquo;ve always wanted to have a home server for some reason, but my formation as a programmer who did leetcode style problems from the age of 10 it was really hard for me to bear the inefficiency of having a Linux machine running 24/7 in my home.\nHaving been semi-cured of that issue let\u0026rsquo;s jump in the actual config.\nThe config Starting out with the computer I chose for a server was a Dell OptiPlex 7050 Micro that I bought refurbished from a local company for around $140, plus I had to get an SSD because the one that came with it had too many bad sectors; so I got an SSD for ~$35 and that was that.","keywords":["home server","docker"],"articleBody":"In the past years I’ve always wanted to have a home server for some reason, but my formation as a programmer who did leetcode style problems from the age of 10 it was really hard for me to bear the inefficiency of having a Linux machine running 24/7 in my home.\nHaving been semi-cured of that issue let’s jump in the actual config.\nThe config Starting out with the computer I chose for a server was a Dell OptiPlex 7050 Micro that I bought refurbished from a local company for around $140, plus I had to get an SSD because the one that came with it had too many bad sectors; so I got an SSD for ~$35 and that was that. Services I started gathering all the needed software that was going to be useful around the internet.\nMedia What I needed was a replacement for:\nAll the Movies/TV Series streaming services because most of the stuff I wanna watch is either not available in my country or not on the streaming platforms. Music because I recently completed my listening setup and streaming services don’t satisfy anymore. I still keep my YouTube Music subscription and use it, but when it comes to listening to full albums FLACs are the way to go. Some kind of iCloud replacement. Password manager Pocket replacement. I would’ve said bookmark manager, but it’s not even that, I’ve been using Pocket for a long while and it just got worse and worse over the years. And some nice-to-haves\nSomething to monitor everything and get notified if they’re down. A reverse proxy to be able to go to cloud.erdeiserver.us rather than 192.162.0.10:8080 A dashboard to access everything from Small note: I have a Synology NAS already, that handles all my photo backup stuff with a 2x4TB NAS grade HDDs in raid.\nPSA: A very important thing when you have a home server is protection in case of power loss. For this I have a very dumb UPS connected that holds my NAS and server up and running for at least 2 hours. In my use case, it’s the perfect setup because I have frequent power spikes and drops for 2-3 minutes and it comes back.\nSo the dashboard looks like this\nThis being said everything I have is here.\nNow get ready for the whole docker-compose file.\nservices: nginxproxymanager: image: \"jc21/nginx-proxy-manager:github-pr-3121\" container_name: nginxproxymanager restart: unless-stopped ports: - \"80:80\" - \"81:81\" - \"443:443\" volumes: - ${HOME}/storage/nginx/data:/data - ${HOME}/storage/nginx/letsencrypt:/etc/letsencrypt - ${HOME}/storage/nginx/config.json:/app/config/production.json nextcloud: image: lscr.io/linuxserver/nextcloud:latest container_name: nextcloud environment: - PUID=1000 - PGID=1000 - TZ=Europe/Bucharest volumes: - ${HOME}/storage/nextcloud/appdata:/config - ${HOME}/storage/nextcloud/data:/data restart: unless-stopped homeassistant: image: lscr.io/linuxserver/homeassistant:latest container_name: homeassistant environment: - PUID=1000 - PGID=1000 - TZ=Europe/Bucharest - TRUSTED_PROXIES=172.18.0.12 volumes: - ${HOME}/storage/hass/config:/config restart: unless-stopped plex: image: lscr.io/linuxserver/plex container_name: plex environment: - PUID=1000 - PGID=1000 - VERSION=docker - PLEX_CLAIM=claim-B7znMtSSnu-YWd-Rv9Jy volumes: - ${HOME}/storage/configs:/config - ${HOME}/storage/tv:/tv - ${HOME}/storage/movies:/movies restart: unless-stopped ports: - 32400:32400 - 1900:1900/udp - 5353:5353/udp - 8324:8324 - 32410:32410/udp - 32412:32412/udp - 32413:32413/udp - 32414:32414/udp - 32469:32469 overseerr: image: lscr.io/linuxserver/overseerr:latest container_name: overseerr environment: - PUID=1000 - PGID=1000 - TZ=Etc/UTC volumes: - ${HOME}/storage/overseerr/config:/config ports: - 5055:5055 restart: unless-stopped homarr: container_name: homarr image: ghcr.io/ajnart/homarr:latest restart: unless-stopped volumes: - /var/run/docker.sock:/var/run/docker.sock - ${HOME}/storage/homarr/configs:/app/data/configs - ${HOME}/storage/homarr/icons:/app/public/icons - ${HOME}/storage/homarr/data:/data ports: - \"7575:7575\" radarr: image: linuxserver/radarr container_name: radarr environment: - PUID=1000 - PGID=1000 - TZ=Europe/Bucharest - UMASK_SET=022 volumes: - ${HOME}/storage/configs/Radarr:/config - ${HOME}/storage/downloads:/downloads - ${HOME}/storage/movies:/movies ports: - 7878:7878 restart: unless-stopped lidarr: image: lscr.io/linuxserver/lidarr:latest container_name: lidarr environment: - PUID=1000 - PGID=1000 - TZ=Eruope/Bucharest volumes: - ${HOME}/storage/configs/lidarr:/config - ${HOME}/storage/music:/music - ${HOME}/storage/downloads:/downloads ports: - 8686:8686 restart: unless-stopped slskd: ports: - 5030:5030/tcp - 5031:5031/tcp - 50300:50300/tcp volumes: - ${HOME}/storage/configs/slskd:/app:rw - ${HOME}/storage/music:/music:rw user: 1000:1000 image: slskd/slskd:latest prowlarr: image: lscr.io/linuxserver/prowlarr:latest container_name: prowlarr environment: - PUID=1000 - PGID=1000 - TZ=Eruope/Bucharest volumes: - ${HOME}/storage/configs/prowlarr:/config ports: - 9696:9696 restart: unless-stopped sonarr: image: linuxserver/sonarr container_name: sonarr environment: - PUID=1000 - PGID=1000 - TZ=Europe/Bucharest - UMASK_SET=022 volumes: - ${HOME}/storage/configs/Sonarr:/config - ${HOME}/storage/downloads:/downloads - ${HOME}/storage/tv:/tv ports: - 8989:8989 restart: unless-stopped qbittorrent: image: lscr.io/linuxserver/qbittorrent:latest container_name: qbittorrent environment: - PUID=1000 - PGID=1000 - TZ=Etc/UTC - WEBUI_PORT=8080 - TORRENTING_PORT=6881 volumes: - ${HOME}/storage/qbittorrent/appdata:/config - ${HOME}/storage/downloads:/downloads - ${HOME}/storage/tv:/tv - ${HOME}/storage/movies:/movies ports: - 8080:8080 - 6881:6881 - 6881:6881/udp restart: unless-stopped navidrome: image: deluan/navidrome:latest ports: - \"4533:4533\" environment: ND_SCANSCHEDULE: 1h ND_LOGLEVEL: info volumes: - ${HOME}/storage/configs/navidrome:/data - ${HOME}/storage/music:/music:ro vaultwarden: image: vaultwarden/server:latest container_name: vaultwarden volumes: - ${HOME}/storage/configs/vw-data/:/data/ restart: unless-stopped wallabag: image: wallabag/wallabag environment: - MYSQL_ROOT_PASSWORD=wallaroot - SYMFONY__ENV__DATABASE_DRIVER=pdo_mysql - SYMFONY__ENV__DATABASE_HOST=db - SYMFONY__ENV__DATABASE_PORT=3306 - SYMFONY__ENV__DATABASE_NAME=wallabag - SYMFONY__ENV__DATABASE_USER=wallabag - SYMFONY__ENV__DATABASE_PASSWORD=wallapass - SYMFONY__ENV__DATABASE_CHARSET=utf8mb4 - SYMFONY__ENV__DATABASE_TABLE_PREFIX=\"wallabag_\" - SYMFONY__ENV__MAILER_DSN=smtp://127.0.0.1 - SYMFONY__ENV__DOMAIN_NAME=https://wall.erdeiserver.us - SYMFONY__ENV__SERVER_NAME=\"Wallabag\" ports: - 9010:80 volumes: - ${HOME}/storage/wallabag/images:/var/www/wallabag/web/assets/images healthcheck: test: [ \"CMD\", \"wget\", \"--no-verbose\", \"--tries=1\", \"--spider\", \"https://wall.erdeiserver.us\", ] interval: 1m timeout: 3s depends_on: - db - redis db: image: mariadb environment: - MYSQL_ROOT_PASSWORD=wallaroot volumes: - ${HOME}/storage/wallabag/data:/var/lib/mysql healthcheck: test: [\"CMD\", \"mysqladmin\", \"ping\", \"-h\", \"localhost\"] interval: 20s timeout: 3s redis: image: redis:alpine healthcheck: test: [\"CMD\", \"redis-cli\", \"ping\"] interval: 20s timeout: 3s uptime-kuma: container_name: uptime-kuma image: louislam/uptime-kuma:latest volumes: - ${HOME}/storage/configs/kuma/data:/app/data - /var/run/docker.sock:/var/run/docker.sock ports: - 3001:3001 - 3307:3306 ### And some stuff my wife asked me for and I didn't get to organize nicely proxy: # The proxy must not be removed. If needed, point your own proxy to this container, rather than removing this container_name: recipesage_proxy image: julianpoy/recipesage-selfhost-proxy:v4.0.0 ports: - 7270:80 depends_on: - static - api - pushpin restart: unless-stopped static: # Hosts frontend assets container_name: recipesage_static image: julianpoy/recipesage-selfhost:static-v2.14.6 restart: unless-stopped api: # Hosts backend API container_name: recipesage_api image: julianpoy/recipesage-selfhost:api-v2.14.6 depends_on: - postgres - typesense - pushpin - browserless command: sh -c \"npx prisma migrate deploy; npx ts-node --swc --project packages/backend/tsconfig.json packages/backend/src/bin/www\" environment: - STORAGE_TYPE=filesystem - FILESYSTEM_STORAGE_PATH=/rs-media - NODE_ENV=selfhost - VERBOSE=false - VERSION=selfhost - POSTGRES_DB=recipesage_selfhost # If changing this, make sure to update the postgres container and the DATABASE_URL below accordingly - POSTGRES_USER=recipesage_selfhost # If changing this, make sure to update the postgres container and the DATABASE_URL below accordingly - POSTGRES_PASSWORD=recipesage_selfhost # If changing this, make sure to update the postgres container and the DATABASE_URL below accordingly - POSTGRES_PORT=5432 # If changing this, make sure to update the postgres container and the DATABASE_URL below accordingly - POSTGRES_HOST=postgres # If changing this, make sure to update the postgres container and the DATABASE_URL below accordingly - POSTGRES_SSL=false - POSTGRES_LOGGING=false - DATABASE_URL=postgresql://recipesage_selfhost:recipesage_selfhost@postgres:5432/recipesage_selfhost - GCM_KEYPAIR - SENTRY_DSN - GRIP_URL=http://pushpin:5561/ - GRIP_KEY=changeme - SEARCH_PROVIDER=typesense - 'TYPESENSE_NODES=[{\"host\": \"typesense\", \"port\": 8108, \"protocol\": \"http\"}]' - TYPESENSE_API_KEY=recipesage_selfhost - STRIPE_SK # Value should not be set. - STRIPE_WEBHOOK_SECRET # Value should not be set - BROWSERLESS_HOST=browserless - BROWSERLESS_PORT=3000 - INGREDIENT_INSTRUCTION_CLASSIFIER_URL=http://ingredient-instruction-classifier:3000/ - OPENAI_API_KEY # Please follow the instructions in the README if you decide to supply a value here volumes: - ${HOME}/storage/food/apimedia:/rs-media restart: unless-stopped typesense: # Provides the fuzzy search engine container_name: recipesage_typesense image: typesense/typesense:0.24.1 volumes: - ${HOME}/storage/food/typesensedata:/data command: \"--data-dir /data --api-key=recipesage_selfhost --enable-cors\" restart: unless-stopped pushpin: # Provides websocket support container_name: recipesage_pushpin image: julianpoy/pushpin:2023-09-17 entrypoint: /bin/sh -c command: [ 'sed -i \"s/sig_key=changeme/sig_key=$$GRIP_KEY/\" /etc/pushpin/pushpin.conf \u0026\u0026 echo \"* $${TARGET},over_http\" \u003e /etc/pushpin/routes \u0026\u0026 pushpin --merge-output', ] environment: - GRIP_KEY=changeme - TARGET=api:3000 restart: unless-stopped postgres: # Database container_name: recipesage_postgres image: postgres:16 environment: - POSTGRES_DB=recipesage_selfhost # If you change this, make sure to change both POSTGRES_DB and DATABASE_URL on the API container - POSTGRES_USER=recipesage_selfhost # If you change this, make sure to change both POSTGRES_USER and DATABASE_URL on the API container - POSTGRES_PASSWORD=recipesage_selfhost # If you change this, make sure to change both POSTGRES_PASSWORD and DATABASE_URL on the API container volumes: - ${HOME}/storage/food/postgresdata:/var/lib/postgresql/data restart: unless-stopped browserless: # A headless browser for scraping websites with the auto import tool container_name: recipesage_browserless image: browserless/chrome:1.61.0-puppeteer-21.4.1 environment: - MAX_CONCURRENT_SESSIONS=3 - MAX_QUEUE_LENGTH=10 restart: unless-stopped ingredient-instruction-classifier: container_name: recipesage_classifier image: julianpoy/ingredient-instruction-classifier:1.4.11 environment: - SENTENCE_EMBEDDING_BATCH_SIZE=200 - PREDICTION_CONCURRENCY=2 restart: unless-stopped volumes: apimedia: driver: local typesensedata: driver: local postgresdata: driver: local I suggest you use Portainer to create this docker-compose stack because it’s a bit easier to manage than with the CLI, but Portainer itself will have to be started with the CLI.\nThat looks like this I left all passwords as default in this file so you can change them when you copy and paste everything, but it will run like this as well, it’s a matter of security only.\nNow, how I suggest you go about these things is to check each container one by one and try to look up on Google what it does and how you have to set them up. For most of them, it is as easy as either looking up the default credentials or setting them up yourself.\nThe more complicated part is setting up nginx proxy manager, but here is the article that helped me set it up in less than 20 minutes.\nThe R suite (overseerr radarr lidarr prowlarr sonarr), is basically what will help you get all your media downloaded, needs a torrent client so there is qBitTorrent. Easy to set up and get working.\nSome things to keep in mind to make your life easy:\nDocker compose stacks have a network of their own, if you want to refer to a service it has an internal IP address that you see in Portainer. You don’t need to have the ports forwarded if you need to connect 2 containers. Just use their internal IP to refer them. Anything can be deleted and things will still work, it’s not necessarily always true, but it’s true enough for you to play with things. It will take a long time to start because you have to download lots of containers, be patient, or add each service after you read about it a bit. You will need to SSH into your system often so it’s great to set up an SSH key for easier authentication. Please change your passwords from the default ones. ","wordCount":"1572","inLanguage":"en","image":"https://codrut.dev/images/serverdocker.webp","datePublished":"2024-07-05T00:00:00Z","dateModified":"2024-07-05T00:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://codrut.dev/posts/homeserver/"},"publisher":{"@type":"Organization","name":"Codrut Erdei","logo":{"@type":"ImageObject","url":"https://codrut.dev/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://codrut.dev/ accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://codrut.dev/>Home</a>&nbsp;»&nbsp;<a href=https://codrut.dev/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Switching to a self hosted paradigm.</h1></header><div class=post-content><p>In the past years I&rsquo;ve always wanted to have a home server for some reason, but my formation as a programmer who did leetcode style problems from the age of 10 it was really hard for me to bear the inefficiency of having a Linux machine running 24/7 in my home.</p><p>Having been semi-cured of that issue let&rsquo;s jump in the actual config.</p><h3 id=the-config>The config<a hidden class=anchor aria-hidden=true href=#the-config>#</a></h3><p>Starting out with the computer I chose for a server was a Dell OptiPlex 7050 Micro that I bought refurbished from a local company for around $140, plus I had to get an SSD because the one that came with it had too many bad sectors;
so I got an SSD for ~$35 and that was that.
<img loading=lazy src=images/DellOptiPlex.webp alt=dell></p><h3 id=services>Services<a hidden class=anchor aria-hidden=true href=#services>#</a></h3><p>I started gathering all the needed software that was going to be useful around the internet.</p><h4 id=media>Media<a hidden class=anchor aria-hidden=true href=#media>#</a></h4><p>What I needed was a replacement for:</p><ul><li>All the Movies/TV Series streaming services because most of the stuff I wanna watch is either not available in my country or not on the streaming platforms.</li><li>Music because I recently completed my listening setup and streaming services don&rsquo;t satisfy anymore. I still keep my YouTube Music subscription and use it, but when it comes to listening to full albums FLACs are the way to go.</li><li>Some kind of iCloud replacement.</li><li>Password manager</li><li>Pocket replacement. I would&rsquo;ve said bookmark manager, but it&rsquo;s not even that, I&rsquo;ve been using Pocket for a long while and it just got worse and worse over the years.</li></ul><p>And some nice-to-haves</p><ul><li>Something to monitor everything and get notified if they&rsquo;re down.</li><li>A reverse proxy to be able to go to <code>cloud.erdeiserver.us</code> rather than <code>192.162.0.10:8080</code></li><li>A dashboard to access everything from</li></ul><blockquote><p>Small note: I have a Synology NAS already, that handles all my photo backup stuff with a 2x4TB NAS grade HDDs in raid.</p></blockquote><p><strong>PSA: A very important thing when you have a home server is protection in case of power loss.</strong> For this I have a very dumb UPS connected that holds my NAS and server up and running for at least 2 hours. In my use case, it&rsquo;s the perfect setup because I have frequent power spikes and drops for 2-3 minutes and it comes back.</p><p>So the dashboard looks like this</p><p><img loading=lazy src=images/homarr.png alt=homarr></p><p>This being said everything I have is here.</p><p>Now get ready for the whole docker-compose file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nginxproxymanager</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;jc21/nginx-proxy-manager:github-pr-3121&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>nginxproxymanager</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;80:80&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;81:81&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;443:443&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/nginx/data:/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/nginx/letsencrypt:/etc/letsencrypt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/nginx/config.json:/app/config/production.json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nextcloud</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lscr.io/linuxserver/nextcloud:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>nextcloud</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Europe/Bucharest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/nextcloud/appdata:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/nextcloud/data:/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>homeassistant</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lscr.io/linuxserver/homeassistant:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>homeassistant</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Europe/Bucharest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TRUSTED_PROXIES=172.18.0.12</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/hass/config:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>plex</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lscr.io/linuxserver/plex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>plex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>VERSION=docker</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PLEX_CLAIM=claim-B7znMtSSnu-YWd-Rv9Jy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/configs:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/tv:/tv</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/movies:/movies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>32400</span><span class=p>:</span><span class=m>32400</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>1900</span><span class=p>:</span><span class=m>1900</span><span class=l>/udp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>5353</span><span class=p>:</span><span class=m>5353</span><span class=l>/udp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>8324</span><span class=p>:</span><span class=m>8324</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>32410</span><span class=p>:</span><span class=m>32410</span><span class=l>/udp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>32412</span><span class=p>:</span><span class=m>32412</span><span class=l>/udp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>32413</span><span class=p>:</span><span class=m>32413</span><span class=l>/udp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>32414</span><span class=p>:</span><span class=m>32414</span><span class=l>/udp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>32469</span><span class=p>:</span><span class=m>32469</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>overseerr</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lscr.io/linuxserver/overseerr:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>overseerr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Etc/UTC</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/overseerr/config:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>5055</span><span class=p>:</span><span class=m>5055</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>homarr</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>homarr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ghcr.io/ajnart/homarr:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>/var/run/docker.sock:/var/run/docker.sock</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/homarr/configs:/app/data/configs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/homarr/icons:/app/public/icons</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/homarr/data:/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;7575:7575&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>radarr</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>linuxserver/radarr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>radarr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Europe/Bucharest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>UMASK_SET=022</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/configs/Radarr:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/downloads:/downloads</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/movies:/movies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>7878</span><span class=p>:</span><span class=m>7878</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>lidarr</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lscr.io/linuxserver/lidarr:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>lidarr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Eruope/Bucharest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/configs/lidarr:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/music:/music</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/downloads:/downloads</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>8686</span><span class=p>:</span><span class=m>8686</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>slskd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>5030</span><span class=p>:</span><span class=m>5030</span><span class=l>/tcp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>5031</span><span class=p>:</span><span class=m>5031</span><span class=l>/tcp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>50300</span><span class=p>:</span><span class=m>50300</span><span class=l>/tcp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/configs/slskd:/app:rw</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/music:/music:rw</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=m>1000</span><span class=p>:</span><span class=m>1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>slskd/slskd:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prowlarr</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lscr.io/linuxserver/prowlarr:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>prowlarr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Eruope/Bucharest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/configs/prowlarr:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>9696</span><span class=p>:</span><span class=m>9696</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>sonarr</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>linuxserver/sonarr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>sonarr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Europe/Bucharest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>UMASK_SET=022</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/configs/Sonarr:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/downloads:/downloads</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/tv:/tv</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>8989</span><span class=p>:</span><span class=m>8989</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>qbittorrent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lscr.io/linuxserver/qbittorrent:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>qbittorrent</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Etc/UTC</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>WEBUI_PORT=8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TORRENTING_PORT=6881</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/qbittorrent/appdata:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/downloads:/downloads</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/tv:/tv</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/movies:/movies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>8080</span><span class=p>:</span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>6881</span><span class=p>:</span><span class=m>6881</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>6881</span><span class=p>:</span><span class=m>6881</span><span class=l>/udp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>navidrome</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>deluan/navidrome:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;4533:4533&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ND_SCANSCHEDULE</span><span class=p>:</span><span class=w> </span><span class=l>1h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ND_LOGLEVEL</span><span class=p>:</span><span class=w> </span><span class=l>info</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/configs/navidrome:/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/music:/music:ro</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>vaultwarden</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>vaultwarden/server:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>vaultwarden</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/configs/vw-data/:/data/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>wallabag</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>wallabag/wallabag</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>MYSQL_ROOT_PASSWORD=wallaroot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYMFONY__ENV__DATABASE_DRIVER=pdo_mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYMFONY__ENV__DATABASE_HOST=db</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYMFONY__ENV__DATABASE_PORT=3306</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYMFONY__ENV__DATABASE_NAME=wallabag</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYMFONY__ENV__DATABASE_USER=wallabag</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYMFONY__ENV__DATABASE_PASSWORD=wallapass</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYMFONY__ENV__DATABASE_CHARSET=utf8mb4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYMFONY__ENV__DATABASE_TABLE_PREFIX=&#34;wallabag_&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYMFONY__ENV__MAILER_DSN=smtp://127.0.0.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYMFONY__ENV__DOMAIN_NAME=https://wall.erdeiserver.us</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYMFONY__ENV__SERVER_NAME=&#34;Wallabag&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>9010</span><span class=p>:</span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/wallabag/images:/var/www/wallabag/web/assets/images</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=s2>&#34;CMD&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=s2>&#34;wget&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=s2>&#34;--no-verbose&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=s2>&#34;--tries=1&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=s2>&#34;--spider&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=s2>&#34;https://wall.erdeiserver.us&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>1m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class=l>3s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>db</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>db</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>mariadb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>MYSQL_ROOT_PASSWORD=wallaroot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/wallabag/data:/var/lib/mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;CMD&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;mysqladmin&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;ping&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;-h&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;localhost&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>20s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class=l>3s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>redis</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>redis:alpine</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;CMD&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;redis-cli&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;ping&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>20s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class=l>3s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>uptime-kuma</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>uptime-kuma</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>louislam/uptime-kuma:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/configs/kuma/data:/app/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>/var/run/docker.sock:/var/run/docker.sock</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>3001</span><span class=p>:</span><span class=m>3001</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>3307</span><span class=p>:</span><span class=m>3306</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c>### And some stuff my wife asked me for and I didn&#39;t get to organize nicely</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>proxy</span><span class=p>:</span><span class=w> </span><span class=c># The proxy must not be removed. If needed, point your own proxy to this container, rather than removing this</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>recipesage_proxy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>julianpoy/recipesage-selfhost-proxy:v4.0.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>7270</span><span class=p>:</span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>static</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>api</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>pushpin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>static</span><span class=p>:</span><span class=w> </span><span class=c># Hosts frontend assets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>recipesage_static</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>julianpoy/recipesage-selfhost:static-v2.14.6</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>api</span><span class=p>:</span><span class=w> </span><span class=c># Hosts backend API</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>recipesage_api</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>julianpoy/recipesage-selfhost:api-v2.14.6</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>postgres</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>typesense</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>pushpin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>browserless</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>sh -c &#34;npx prisma migrate deploy; npx ts-node --swc --project packages/backend/tsconfig.json packages/backend/src/bin/www&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>STORAGE_TYPE=filesystem</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>FILESYSTEM_STORAGE_PATH=/rs-media</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>NODE_ENV=selfhost</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>VERBOSE=false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>VERSION=selfhost</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>POSTGRES_DB=recipesage_selfhost</span><span class=w> </span><span class=c># If changing this, make sure to update the postgres container and the DATABASE_URL below accordingly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>POSTGRES_USER=recipesage_selfhost</span><span class=w> </span><span class=c># If changing this, make sure to update the postgres container and the DATABASE_URL below accordingly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>POSTGRES_PASSWORD=recipesage_selfhost</span><span class=w> </span><span class=c># If changing this, make sure to update the postgres container and the DATABASE_URL below accordingly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>POSTGRES_PORT=5432</span><span class=w> </span><span class=c># If changing this, make sure to update the postgres container and the DATABASE_URL below accordingly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>POSTGRES_HOST=postgres</span><span class=w> </span><span class=c># If changing this, make sure to update the postgres container and the DATABASE_URL below accordingly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>POSTGRES_SSL=false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>POSTGRES_LOGGING=false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>DATABASE_URL=postgresql://recipesage_selfhost:recipesage_selfhost@postgres:5432/recipesage_selfhost</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>GCM_KEYPAIR</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SENTRY_DSN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>GRIP_URL=http://pushpin:5561/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>GRIP_KEY=changeme</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SEARCH_PROVIDER=typesense</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;TYPESENSE_NODES=[{&#34;host&#34;: &#34;typesense&#34;, &#34;port&#34;: 8108, &#34;protocol&#34;: &#34;http&#34;}]&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TYPESENSE_API_KEY=recipesage_selfhost</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>STRIPE_SK</span><span class=w> </span><span class=c># Value should not be set.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>STRIPE_WEBHOOK_SECRET</span><span class=w> </span><span class=c># Value should not be set</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>BROWSERLESS_HOST=browserless</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>BROWSERLESS_PORT=3000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>INGREDIENT_INSTRUCTION_CLASSIFIER_URL=http://ingredient-instruction-classifier:3000/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>OPENAI_API_KEY</span><span class=w> </span><span class=c># Please follow the instructions in the README if you decide to supply a value here</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/food/apimedia:/rs-media</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>typesense</span><span class=p>:</span><span class=w> </span><span class=c># Provides the fuzzy search engine</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>recipesage_typesense</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>typesense/typesense:0.24.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/food/typesensedata:/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;--data-dir /data --api-key=recipesage_selfhost --enable-cors&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pushpin</span><span class=p>:</span><span class=w> </span><span class=c># Provides websocket support</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>recipesage_pushpin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>julianpoy/pushpin:2023-09-17</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>entrypoint</span><span class=p>:</span><span class=w> </span><span class=l>/bin/sh -c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=s1>&#39;sed -i &#34;s/sig_key=changeme/sig_key=$$GRIP_KEY/&#34; /etc/pushpin/pushpin.conf &amp;&amp; echo &#34;* $${TARGET},over_http&#34; &gt; /etc/pushpin/routes &amp;&amp; pushpin --merge-output&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>GRIP_KEY=changeme</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TARGET=api:3000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>postgres</span><span class=p>:</span><span class=w> </span><span class=c># Database</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>recipesage_postgres</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>postgres:16</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>POSTGRES_DB=recipesage_selfhost</span><span class=w> </span><span class=c># If you change this, make sure to change both POSTGRES_DB and DATABASE_URL on the API container</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>POSTGRES_USER=recipesage_selfhost</span><span class=w> </span><span class=c># If you change this, make sure to change both POSTGRES_USER and DATABASE_URL on the API container</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>POSTGRES_PASSWORD=recipesage_selfhost</span><span class=w> </span><span class=c># If you change this, make sure to change both POSTGRES_PASSWORD and DATABASE_URL on the API container</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>${HOME}/storage/food/postgresdata:/var/lib/postgresql/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>browserless</span><span class=p>:</span><span class=w> </span><span class=c># A headless browser for scraping websites with the auto import tool</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>recipesage_browserless</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>browserless/chrome:1.61.0-puppeteer-21.4.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>MAX_CONCURRENT_SESSIONS=3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>MAX_QUEUE_LENGTH=10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ingredient-instruction-classifier</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>recipesage_classifier</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>julianpoy/ingredient-instruction-classifier:1.4.11</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SENTENCE_EMBEDDING_BATCH_SIZE=200</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PREDICTION_CONCURRENCY=2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>apimedia</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class=l>local</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>typesensedata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class=l>local</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>postgresdata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class=l>local</span><span class=w>
</span></span></span></code></pre></div><p>I suggest you use Portainer to create this docker-compose stack because it&rsquo;s a bit easier to manage than with the CLI, but Portainer itself will have to be started with the CLI.</p><p>That looks like this
<img loading=lazy src=images/portainer.png alt=portainer></p><p>I left all passwords as default in this file so you can change them when you copy and paste everything, but it will run like this as well, it&rsquo;s a matter of security only.</p><p>Now, how I suggest you go about these things is to check each container one by one and try to look up on Google what it does and how you have to set them up. For most of them, it is as easy as either looking up the default credentials or setting them up yourself.</p><p>The more complicated part is setting up nginx proxy manager, but <a href=https://notthebe.ee/blog/easy-ssl-in-homelab-dns01/>here is the article</a> that helped me set it up in less than 20 minutes.</p><p>The R suite (<code>overseerr</code> <code>radarr</code> <code>lidarr</code> <code>prowlarr</code> <code>sonarr</code>), is basically what will help you get all your media downloaded, needs a torrent client so there is <code>qBitTorrent</code>. Easy to set up and get working.</p><p>Some things to keep in mind to make your life easy:</p><ul><li>Docker compose stacks have a network of their own, if you want to refer to a service it has an internal IP address that you see in Portainer. You don&rsquo;t need to have the ports forwarded if you need to connect 2 containers. Just use their internal IP to refer them.</li><li>Anything can be deleted and things will still work, it&rsquo;s not necessarily always true, but it&rsquo;s true enough for you to play with things.</li><li>It will take a long time to start because you have to download lots of containers, be patient, or add each service after you read about it a bit.</li><li>You will need to SSH into your system often so it&rsquo;s great to set up an SSH key for easier authentication.</li><li>Please change your passwords from the default ones.</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://codrut.dev/tags/home-server/>Home Server</a></li><li><a href=https://codrut.dev/tags/docker/>Docker</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://codrut.dev/>Codrut Erdei</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>